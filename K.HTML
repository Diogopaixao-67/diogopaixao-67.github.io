<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Playmates - Plataforma de Votos</title>
  <style>
  
    :root{
      --fb-blue:#3b5998;
      --accent:#ff7a00;
      --danger:#e10600;
      --bg:#f0f2f5;
      --card:#fff;
    }
    *{box-sizing:border-box}
    body {margin:0; font-family:Arial, Helvetica, sans-serif;background:var(--bg)}
    header {background:#FF6600;color:#fff;padding:10px 12px;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:30}
    header h1{margin:0;font-size:20px}
    nav{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:6px}
    nav a{color:#fff;text-decoration:none;font-weight:bold;padding:6px 10px;border-radius:6px;cursor:pointer;flex:1 1 auto;text-align:center}
    nav a:hover{background:rgba(255,255,255,.17)}
    .search-wrap{display:flex;align-items:center;gap:8px;margin-top:6px;flex:1 1 100%}
    .search-input{padding:6px 8px;border-radius:8px;border:none;flex:1}
    .container{padding:16px;max-width:1100px;margin:0 auto}
    .grid{display:grid;gap:12px}
    .btn{background:var(--accent);border:none;color:#fff;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:bold}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .btn-red{background:var(--danger)}
    .btn-outline{background:#fff;color:#333;border:1px solid #ccc}
    .hidden{display:none}
    .card{background:var(--card);border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.08);padding:14px;width:100%}
    .list{display:flex;flex-direction:column;gap:10px}
    table{width:100%;border-collapse:collapse;display:block;overflow-x:auto}
    th,td{padding:8px;border-bottom:1px solid #e9ecef;text-align:center;white-space:nowrap}
    thead th{background:#f7f7f7}
    img.avatar{width:50px;height:50px;object-fit:cover;border-radius:8px;background:#eee}
    .circle{width:18px;height:18px;border-radius:50%;display:inline-block;margin-right:8px;background:var(--danger);cursor:pointer}
    #countdown{position:fixed;right:16px;bottom:16px;background:#000;color:#fff;padding:8px 10px;border-radius:10px;font-size:14px;box-shadow:0 2px 6px rgba(0,0,0,.25);z-index:25;cursor:pointer}
    .editor-row{display:grid;grid-template-columns:60px 1fr 1fr 90px auto;gap:8px;align-items:center}
    .editor-row input[type="text"], .editor-row input[type="number"], select{width:100%;padding:6px 8px;border:1px solid #ccc;border-radius:6px}
    .editor-row input[type="file"]{font-size:12px}
    .event-img{width:100%;max-height:180px;object-fit:cover;border-radius:10px;background:#eee}
    .feed-central{background:#fff3cd;color:#8a6d3b;border:1px solid #ffeeba;padding:10px 12px;border-radius:10px;margin-bottom:10px}
    .feed-actions{display:flex;gap:8px;flex-wrap:wrap}
    .profile-card{display:flex;gap:12px;align-items:center}
    .small-tabs{display:flex;gap:6px;flex-wrap:wrap}
    .small-tab{background:#fff;padding:6px 10px;border-radius:8px;border:1px solid #ddd;box-shadow:0 1px 4px rgba(0,0,0,.06)}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:60}
    .winner-card{background:#fff;padding:20px;border-radius:14px;text-align:center;width:90%;max-width:520px;animation:pop .6s}
    @keyframes pop{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}
    .winner-name{font-size:28px;font-weight:900;margin-top:6px}
    .winner-info{margin-top:8px;font-size:18px}
    .profile-photo{width:110px;height:110px;border-radius:12px;object-fit:cover;background:#eee;border:2px solid #fff;box-shadow:0 2px 6px rgba(0,0,0,.12)}

    /* üì± Responsividade */
    @media (max-width:768px){
      header{flex-direction:column;align-items:flex-start}
      nav{width:100%;justify-content:space-around}
      .editor-row{grid-template-columns:1fr;gap:6px}
      .feed-actions{flex-direction:column}
      .btn, .btn-outline{width:100%;text-align:center}
      .grid{grid-template-columns:1fr}
      body{font-size:15px}
    }
    @media (max-width:480px){
      header h1{font-size:18px}
      nav a{font-size:14px;padding:6px}
      .search-input{font-size:14px}
      .winner-name{font-size:22px}
      .winner-info{font-size:16px}
    }
    
    /* Puzzle styles */
    .puzzle-grid{display:grid;grid-template-columns:repeat(3,80px);gap:8px;justify-content:center}
    .puzzle-cell{width:80px;height:80px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.08);font-weight:900;font-size:22px;cursor:pointer}
    .puzzle-cell.empty{background:transparent;box-shadow:none;cursor:default}
  </style>
</head>
    <body>
  <header>
    <h1>Playmates</h1>
    <nav>
      <a onclick="showSection('home')">Home</a>
      <a onclick="showSection('about')">About</a>
      <a onclick="showSection('services')">Services</a>
      <a onclick="showSection('direto')">DiretoVots</a>
      <a onclick="showSection('ranking')">Ranking Escola</a>
      <a onclick="showSection('events')">Eventos</a>
      <a onclick="showSection('feed')">Feed</a>
      
      <a onclick="showSection('profile')">Perfil</a><a onclick="showSection('jogos')">Jogos</a>
      <a onclick="showSection
    </nav>

    <div class="search-wrap">
      <input id="searchInput" class="search-input" placeholder="üîé Buscar por nome..." oninput="doSearch()" />
      <div id="searchCount" style="color:#fff;font-weight:bold;margin-right:8px"></div>
    </div>
  </header>

  <div class="container">
    <!-- HOME -->
    <section id="home" class="grid">
      <div class="card">
        <h2>Painel de Inscri√ß√£o - Disputa de Votos</h2>
        <p>Playmates √© uma plataforma que transforma votos em dinheiro para estudantes! Inscreva-se e participe para ganhar recompensas em sua escola.</p>
        <form id="registerForm" class="grid" onsubmit="return false;">
          <input type="text" id="nome" placeholder="Nome Completo" required>
          <input type="tel" id="telefone" placeholder="N√∫mero WhatsApp" required>
          <input type="text" id="escola" placeholder="Nome da Escola" required>
          <select id="pack" required>
            <option value="">-- Escolha um Pack de Votos --</option>
            <option value="Pack Gr√°tis">Pack gr√°tis - ganho de 1000kz (20s)</option>
            <option value="Pack Mater">Pack Mater - ganho de 5.000kz (10s)</option>
            <option value="Pack Premium">Pack Premium - muito mais!</option>
          </select>
          <button class="btn" id="btnCadastrar">Cadastrar</button>
        </form>
        <div class="feed-actions">
          <button class="btn-outline" onclick="showPedidos()">Pedidos Pendentes</button>
          <strong id="pendingCount"></strong>
        </div>
        <div id="pedidos" class="list hidden"></div>
      </div>

      <div class="card">
        <h3 style="display:flex;align-items:center;gap:10px">
          <span class="btn btn-red" style="pointer-events:none">DiretoVots</span>
          <button class="btn" onclick="showSection('direto')">Abrir</button>
        </h3>
        <p>Gerencie votos, selecione concorrentes e envie o voto ao CEO via WhatsApp.</p>
      </div>
    </section>
<!-- ABOUT -->
<section id="about" class="hidden card" style="text-align:center;">
  <!-- Foto de perfil em c√≠rculo com anima√ß√£o -->
  <div class="profile-pic-container">
    <img id="profilePic" src="HTML/Playmates.png" alt="Foto de perfil" class="profile-pic"/>
    <div class="star-animation"></div>
  </div>

  <!-- Modal para visualizar imagem -->
  <div id="imageModal" class="modal hidden">
    <span class="close" onclick="closeModal()">&times;</span>
    <img id="modalImg" class="modal-content"/>
  </div>

  <h2>Sobre o Playmates</h2>
  <p>
    O Playmates foi criado por <strong>Diogo Paix√£o</strong> aos 17 anos e lan√ßado em 2025.  
    √â uma plataforma pioneira em Angola que transforma votos em oportunidades financeiras.  
    J√° alcan√ßou mais de 20 escolas do ensino m√©dio, permitindo que estudantes ganhem recompensas de forma confi√°vel e segura.  
    √â mais que uma disputa, √© um caminho de empreendedorismo para jovens angolanos. Estimula lideran√ßa, comunica√ß√£o e capta√ß√£o de apoios nas comunidades escolares.
  </p>

  <!-- Rea√ß√µes -->
  <div class="reactions">
    <button onclick="addReaction('like')">üëç</button>
    <button onclick="addReaction('love')">‚ô•Ô∏è</button>
    <div id="reactionCounts"></div>
  </div>

  <!-- Galeria horizontal -->
  <div class="gallery">
    <img src="HTML/Playmates.png" alt="Foto 1"/>
    <img src="HTML/Playmates.png" alt="Foto 2"/>
    <img src="HTML/Playmates.png" alt="Foto 3"/>
  </div>

  <!-- Contato -->
  <div class="contact-card">
    <h3>Contacto</h3>
    <p>üìû +244 941 530 467</p>
    <a href="https://wa.me/244941530467" target="_blank" class="btn-whatsapp">Marcar Reuni√£o no WhatsApp</a>
  </div>
</section>


<style>
  .profile-pic-container {
    position: relative;
    display: inline-block;
    margin-bottom: 10px;
  }
  .profile-pic {
    width: 150px; height: 150px;
    border-radius: 50%;
    cursor: pointer;
    border: 3px solid #3b5998;
    object-fit: cover;
  }
  .star-animation {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    border-radius: 50%;
    pointer-events: none;
    background: radial-gradient(circle, rgba(255,255,0,0.5) 10%, transparent 60%);
    animation: twinkle 2s infinite alternate;
  }
  @keyframes twinkle {
    from { transform: scale(1); opacity: 0.5; }
    to { transform: scale(1.2); opacity: 1; }
  }

  /* Modal */
  .modal {
    display:flex; justify-content:center; align-items:center;
    position:fixed; z-index:999; left:0; top:0; width:100%; height:100%;
    background:rgba(0,0,0,0.8);
  }
  .modal.hidden { display:none; }
  .modal-content {
    max-width:80%; max-height:80%;
    border-radius: 10px;
  }
  .close {
    position:absolute; top:20px; right:40px;
    color:white; font-size:40px; cursor:pointer;
  }

  /* Rea√ß√µes */
  .reactions { margin: 15px 0; }
  .reactions button {
    background:none; border:none; font-size:25px;
    cursor:pointer; margin:0 5px;
  }
  #reactionCounts { margin-top: 5px; font-size:14px; color:#555; }

  /* Galeria */
  .gallery {
    display:flex; justify-content:center; gap:10px;
    margin-top:15px;
  }
  .gallery img {
    width:80px; height:80px;
    object-fit:cover; border-radius:8px;
    border:2px solid #ccc;
  }

  /* Contato */
  .contact-card {
    margin-top:20px; padding:15px;
    border:1px solid #ddd; border-radius:10px;
    background:#f9f9f9; text-align:center;
  }
  .btn-whatsapp {
    display:inline-block; margin-top:10px;
    padding:8px 15px; background:#25D366;
    color:white; border-radius:5px; text-decoration:none;
  }
</style>

<script>
  // ===== Modal de imagem =====
  const profilePic = document.getElementById('profilePic');
  const modal = document.getElementById('imageModal');
  const modalImg = document.getElementById('modalImg');
  profilePic.onclick = () => {
    modal.classList.remove('hidden');
    modalImg.src = profilePic.src;
  }
  function closeModal(){ modal.classList.add('hidden'); }

  // ===== Rea√ß√µes =====
  function loadReactions(){
    return JSON.parse(localStorage.getItem("LS.reactions")) || { like:0, love:0 };
  }
  function saveReactions(data){
    localStorage.setItem("LS.reactions", JSON.stringify(data));
  }
  function updateReactionUI(){
    const r = loadReactions();
    document.getElementById("reactionCounts").innerText =
      `üëç ${r.like} ¬∑ ‚ô•Ô∏è ${r.love}`;
  }
  function addReaction(type){
    const r = loadReactions();
    r[type]++; 
    saveReactions(r);
    updateReactionUI();
  }
  // inicializar
  updateReactionUI();
</script>

    <!-- ABOUT -->
    <section id="about" class="hidden card">
                    <img src="HTML/Playmates.png"/>
            
      <h2>Sobre o Playmates</h2>
      <p>O Playmates foi criado por <strong>Diogo Paix√£o</strong> aos 17 anos e lan√ßado em 2025. √â uma plataforma pioneira em Angola que transforma votos em oportunidades financeiras. J√° alcan√ßou mais de 20 escolas do ensino m√©dio, permitindo que estudantes ganhem recompensas de forma confi√°vel e segura. √â mais que uma disputa, √© um caminho de empreendedorismo para jovens angolanos. Estimula lideran√ßa, comunica√ß√£o e capta√ß√£o de apoios nas comunidades escolares.</p>
    </section>

    <!-- SERVICES -->
    <section id="services" class="hidden card">
      <h2>Servi√ßos</h2>
      <p>Conectamos escolas e estudantes em competi√ß√µes interativas que convertem votos em ganhos reais. Gest√£o de inscri√ß√µes, acompanhamento de votos em tempo real e pagamentos confi√°veis.</p>
    </section>

    <!-- DIRETOVOTS -->
    <section id="direto" class="hidden card">
      <h2>DiretoVots</h2>
      <div class="list">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
          <div>
            <button class="btn" onclick="openCompetitorEditor()">Editar Concorrentes (senha 777)</button>
            <button class="btn-outline" onclick="requestNotifications()">Ativar Notifica√ß√µes</button>
          </div>
          <div id="inCountdownStatus"></div>
        </div>

        <div style="margin-top:10px" id="liveTabs" class="small-tabs"></div>

        <table id="competitorsTable">
          <thead>
            <tr><th>Foto</th><th>Nome</th><th>Escola</th><th>Votos</th><th>A√ß√µes</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <button class="btn" onclick="openCompetitorEditor()">Editar Concorrentes (senha 777)</button>
        <div id="competitorEditor" class="hidden card"></div>
      </div>
    </section>

    <!-- RANKING ESCOLA -->
    <section id="ranking" class="hidden card">
      <h2>Ranking por Escola</h2>
      <div id="rankingResumo" class="list"></div>
      <hr>
      <div id="rankingDetalhes" class="list"></div>
    </section>

    <!-- EVENTOS -->
    <section id="events" class="hidden card">
      <h2>Eventos</h2>
      <div id="eventToolbar" class="feed-actions">
        <button class="btn" onclick="toggleEventEditor()">Adicionar/Editar (senha A4)
        
        
        </button>
      </div>
      <div id="eventEditor" class="hidden card">
        <div class="grid">
          <input type="text" id="evData" placeholder="Dia/M√™s/Ano">
          <textarea id="evConteudo" placeholder="Descri√ß√£o do evento" rows="3" style="width:100%"></textarea>
          <input type="file" id="evFoto" accept="image/*">
          <div class="feed-actions">
            <button class="btn" onclick="saveNewEvent()">Salvar Evento</button>
            <button class="btn-outline" onclick="cancelEventEditor()">Cancelar</button><!-- Exemplo de post no Feed -->
<div class="post">
  Postagem de exemplo
  <button class="btn-excluir" onclick="excluirPost(this)">x</button>
</div>
          </div>
        </div>
      </div>
      <!-- Bot√£o de excluir na sess√£o Eventos -->
<button onclick="excluirEvento()">Excluir Evento</button>

<script>
  function excluirEvento(){
    let senha = prompt("Digite a senha para excluir este evento:");
    if(senha === "ER"){
      document.getElementById("eventos").remove();
      alert("Evento exclu√≠do com sucesso!");
    } else {
      alert("Senha incorreta. Exclus√£o cancelada.");
    }
  }
</script>
      <div id="eventList" class="grid"></div>
    </section>

    <!-- FEED -->
    <section id="feed" class="hidden card">
      <h2>Feed de Not√≠cias</h2>
      <div class="feed-central">Sabias que 1 voto pode val√©r para vc 5.000kz</div>
      <div class="feed-actions">
        <button class="btn" onclick="openFeedAuto()">Auto (admin)</button>
      </div>
      <div id="feedAuto" class="hidden card">
        <textarea id="feedText" rows="3" placeholder="Escreva a publica√ß√£o..." style="width:100%"></textarea>
        <div class="feed-actions">
          <button class="btn" onclick="postToFeed()">Publicar</button>
          <button class="btn-outline" onclick="closeFeedAuto()">Fechar</button>
        </div>
      </div>
      <div id="feedList" class="list"></div>
    </section>

    <!-- PROFILE -->
    <section id="profile" class="hidden card">
      <h2>Perfil</h2>
      <div id="profileArea"></div>
    </section>
    
  <!-- JOGOS -->
  <section id="jogos" class="card hidden">
    <h2>Jogos - PLAYHOU</h2>
    <div class="card">
      <div style="text-align:center;margin-bottom:10px">
        <div id="puzzleTimer">02:00</div>
        <div id="puzzleStatus" class="small"></div>
      </div>
      <div id="puzzleBoard" class="puzzle-grid"></div>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">
        <button class="btn" id="startPuzzleBtn">Iniciar Jogo</button>
        <button class="btn-outline" id="shuffleBtn">Embaralhar</button>
      </div>
      <div style="margin-top:12px">Ranking (melhores tempos): <ul id="puzzleRank"></ul> 
      
      
    <!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel Love & Sexo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }

    #painel {
      display: none;
      padding: 20px;
    }
    .card {
      background: #fff;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
    }
    input, select, button {
      margin-top: 8px;
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #e91e63;
      color: #fff;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }
    button:hover {
      background: #c2185b;
    }
    .perfil {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #eee;
      border-radius: 6px;
      background: #fafafa;
    }
    #acoes {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    #acoes button {
      flex: 1;
    }
    footer {
      margin-top: 20px;
      padding: 15px;
      background: #fff3f3;
      border-top: 1px solid #ddd;
      font-size: 14px;
    }
  </style>
</head>
<body>
    <button id="btnLoveSexo">Love & Sexo</button>
  </div>
  
  <div id="painel">
    <div class="card" id="formCard">
      <label>Nome:</label>
      <input type="text" id="nome">
      
      <label>Sexo:</label>
      <select id="sexo">
        <option value="">Selecione</option>
        <option value="homem">Homem</option>
        <option value="mulher">Mulher</option>
      </select>
      
      <label>Estado Civil:</label>
      <select id="estadoCivil">
        <option value="">Selecione</option>
        <option value="solteiro">Solteiro(a)</option>
        <option value="casado">Casado(a)</option>
      </select>
      
      <label>Profiss√£o:</label>
      <select id="profissao">
        <option value="">Selecione</option>
        <option>Barbeiro</option>
        <option>Ministra</option>
        <option>Pol√≠cia</option>
        <option>Bombeiro</option>
        <option>Engenheiro</option>
        <option>Desempregado</option>
        <option>Taxista</option>
        <option>Outro</option>
      </select>
      
      <button onclick="salvarDados()">Salvar Dados</button>
    </div>

    <div id="acoes" style="display:none;">
      <button onclick="editarDados()">Editar Dados</button>
      <button onclick="apagarDados()">Apagar Dados</button>
    </div>
    
    <div id="conteudoExtra"></div>
    
    <footer>
      üí∞ Se queres ganhar dinheiro com o <b>Playmates</b> siga os passos abaixo:<br>
      ‚û°Ô∏è Convide 20 pessoas e ganhe <b>5$</b>.
    </footer>
  </div>
  
  <script>
    const btnLoveSexo = document.getElementById("btnLoveSexo");
    const painel = document.getElementById("painel");
    const conteudoExtra = document.getElementById("conteudoExtra");
    const nomeInput = document.getElementById("nome");
    const sexoInput = document.getElementById("sexo");
    const estadoCivilInput = document.getElementById("estadoCivil");
    const profissaoInput = document.getElementById("profissao");
    const formCard = document.getElementById("formCard");
    const acoes = document.getElementById("acoes");

    const mulheres = [
      { nome: "Ana", tel: "923111111", profissao: "Estudante" },
      { nome: "Beatriz", tel: "923222222", profissao: "M√©dica" },
      { nome: "Carla", tel: "923333333", profissao: "Engenheira" },
      { nome: "Diana", tel: "923444444", profissao: "Designer" },
      { nome: "Eva", tel: "923555555", profissao: "Advogada" },
      { nome: "Filipa", tel: "923666666", profissao: "Jornalista" },
      { nome: "Gina", tel: "923777777", profissao: "Cantora" },
      { nome: "Helena", tel: "923888888", profissao: "Professora" },
      { nome: "In√™s", tel: "923999999", profissao: "Esteticista" },
      { nome: "Joana", tel: "921111111", profissao: "Empres√°ria" },
      { nome: "Karina", tel: "921222222", profissao: "Atriz" },
      { nome: "L√∫cia", tel: "921333333", profissao: "Arquiteta" },
      { nome: "Marta", tel: "921444444", profissao: "Farmac√™utica" },
      { nome: "N√°dia", tel: "921555555", profissao: "Psic√≥loga" },
      { nome: "Ol√≠via", tel: "921666666", profissao: "Modelo" },
      { nome: "Patr√≠cia", tel: "921777777", profissao: "Vendedora" },
      { nome: "Quit√©ria", tel: "921888888", profissao: "Gestora" },
      { nome: "Rita", tel: "921999999", profissao: "Cantora" },
      { nome: "Sara", tel: "922111111", profissao: "Fot√≥grafa" },
      { nome: "Teresa", tel: "922222222", profissao: "Influencer" }
    ];

    const homens = [
      { nome: "Carlos", tel: "924111111", profissao: "Engenheiro" },
      { nome: "David", tel: "924222222", profissao: "Pol√≠cia" },
      { nome: "Eduardo", tel: "924333333", profissao: "M√©dico" },
      { nome: "Fernando", tel: "924444444", profissao: "Professor" },
      { nome: "Gustavo", tel: "924555555", profissao: "Taxista" },
      { nome: "Henrique", tel: "924666666", profissao: "Barbeiro" },
      { nome: "Igor", tel: "924777777", profissao: "Bombeiro" },
      { nome: "Jo√£o", tel: "924888888", profissao: "Estudante" },
      { nome: "Lucas", tel: "924999999", profissao: "Designer" },
      { nome: "Miguel", tel: "925111111", profissao: "Advogado" },
      { nome: "Nelson", tel: "925222222", profissao: "Empres√°rio" },
      { nome: "Oscar", tel: "925333333", profissao: "Cantor" },
      { nome: "Paulo", tel: "925444444", profissao: "Ator" },
      { nome: "Ricardo", tel: "925555555", profissao: "Gestor" },
      { nome: "Samuel", tel: "925666666", profissao: "Modelo" },
      { nome: "Tiago", tel: "925777777", profissao: "Fot√≥grafo" },
      { nome: "Ubirajara", tel: "925888888", profissao: "Jornalista" },
      { nome: "Vitor", tel: "925999999", profissao: "Farmac√™utico" },
      { nome: "Wilson", tel: "926111111", profissao: "Influencer" },
      { nome: "Xavier", tel: "926222222", profissao: "Psic√≥logo" }
    ];

    const perguntas = [
      "Qual a data de anivers√°rio do seu parceiro?",
      "Qual a cor favorita dele(a)?",
      "Qual foi a primeira viagem juntos?",
      "Qual o prato favorito dele(a)?",
      "Qual o maior sonho dele(a)?"
    ];

    btnLoveSexo.addEventListener("click", () => {
      painel.style.display = "block";
      carregarDados();
    });

    function salvarDados() {
      const dados = {
        nome: nomeInput.value,
        sexo: sexoInput.value,
        estadoCivil: estadoCivilInput.value,
        profissao: profissaoInput.value
      };
      localStorage.setItem("dadosLoveSexo", JSON.stringify(dados));
      mostrarConteudo(dados);
      acoes.style.display = "flex";
      formCard.style.display = "none";
    }

    function carregarDados() {
      const dadosSalvos = localStorage.getItem("dadosLoveSexo");
      if (dadosSalvos) {
        const dados = JSON.parse(dadosSalvos);
        mostrarConteudo(dados);
        acoes.style.display = "flex";
        formCard.style.display = "none";
      } else {
        acoes.style.display = "none";
        formCard.style.display = "block";
      }
    }

    function mostrarConteudo(dados) {
      conteudoExtra.innerHTML = "";
      if (dados.estadoCivil === "solteiro") {
        conteudoExtra.innerHTML = "<h3>Pessoas Solteiras Dispon√≠veis:</h3>";
        let lista = dados.sexo === "homem" ? mulheres : homens;
        lista.forEach(p => {
          conteudoExtra.innerHTML += `
            <div class="perfil">
              <b>${p.nome}</b> - ${p.profissao}<br>
              üìû ${p.tel}<br>
              <button onclick="convidar('${p.nome}')">Convidar</button>
            </div>
          `;
        });
      } else if (dados.estadoCivil === "casado") {
        conteudoExtra.innerHTML = "<h3>Prove que conhece seu parceiro:</h3>";
        perguntas.forEach(p => {
          conteudoExtra.innerHTML += `
            <div class="perfil">${p}</div>
          `;
        });
      }
    }

    function editarDados() {
      const dadosSalvos = JSON.parse(localStorage.getItem("dadosLoveSexo"));
      nomeInput.value = dadosSalvos.nome;
      sexoInput.value = dadosSalvos.sexo;
      estadoCivilInput.value = dadosSalvos.estadoCivil;
      profissaoInput.value = dadosSalvos.profissao;
      formCard.style.display = "block";
      acoes.style.display = "none";
      conteudoExtra.innerHTML = "";
    }

    function apagarDados() {
      localStorage.removeItem("dadosLoveSexo");
      conteudoExtra.innerHTML = "";
      formCard.style.display = "block";
      acoes.style.display = "none";
      nomeInput.value = "";
      sexoInput.value = "";
      estadoCivilInput.value = "";
      profissaoInput.value = "";
    }

    function convidar(nome) {
      const numero = "244941530467";
      const mensagem = `Ol√°, quero convidar ${nome} para um encontro.`;
      window.open(`https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`, "_blank");
    }
  </script>
</body>
</html>
      </div>
    </div>

  </section>
  </div>

  <!-- COUNTDOWN -->
  <div id="countdown" title="Clique para editar (senha R2)">00:00:00</div>


  <!-- O RESTO DO SEU HTML E JAVASCRIPT ORIGINAL AQUI -->


  <script>
    // ======= STORAGE KEYS =======
    const LS = {
      usuarios:'usuarios_v2', competitors:'competitors_v2', eventos:'eventos_v2',
      feed:'feedPosts_v2', countdown:'countdownSeconds_v2', activeProfile:'activeProfile_v2',
      profilePosts:'profilePosts_v2', smsStore:'smsStore_v2'
    };

    // ======= STATE =======
    let usuarios = JSON.parse(localStorage.getItem(LS.usuarios)) || [];
    let competitors = (JSON.parse(localStorage.getItem(LS.competitors)) || [
      { nome:'Concorrente 1', escola:'Escola A', votos:0, foto:'' },
      { nome:'Concorrente 2', escola:'Escola B', votos:0, foto:'' },
      { nome:'Concorrente 3', escola:'Escola A', votos:0, foto:'' },
      { nome:'Concorrente 4', escola:'Escola C', votos:0, foto:'' },
      { nome:'Concorrente 5', escola:'Escola B', votos:0, foto:'' }
    ]).map(c=>({ escola:'', foto:'', ...c }));
    let eventos = JSON.parse(localStorage.getItem(LS.eventos)) || [];
    let feedPosts = JSON.parse(localStorage.getItem(LS.feed)) || [];
    let countdownSeconds = Number(localStorage.getItem(LS.countdown) || 0);
    let timerInterval = null;
    let smsStore = JSON.parse(localStorage.getItem(LS.smsStore) || '[]'); // {to,from,msg,timestamp}
    let activeProfile = JSON.parse(localStorage.getItem(LS.activeProfile)) || null;
    let profilePosts = JSON.parse(localStorage.getItem(LS.profilePosts) || '{}'); // {phone: [{text,ts}]}

    // add default flags
    usuarios = usuarios.map(u=>({ responded: false, ...u }));

    // ======= HELPERS =======
    const save = (k,v)=>localStorage.setItem(k, JSON.stringify(v));
    const normTel = t=> (t||'').replace(/\D+/g,'');
    const now = ()=>Date.now();
    const H3 = 3*60*60*1000; // 3 hours in ms

    // clean expired SMS and profile posts (3h)
    function cleanupExpired(){
      const cutoff = now() - H3;
      smsStore = (smsStore || []).filter(s=> s.ts > cutoff );
      save(LS.smsStore, smsStore);
      // profile posts per phone
      Object.keys(profilePosts).forEach(phone=>{
        profilePosts[phone] = (profilePosts[phone] || []).filter(p=> p.ts > cutoff);
        if(profilePosts[phone].length===0) delete profilePosts[phone];
      });
      save(LS.profilePosts, profilePosts);
    }

    // call cleanup on load
    cleanupExpired();

    // ======= UI Helpers =======
    function showSection(id){
      document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));
      const sec = document.getElementById(id);
      if(sec) sec.classList.remove('hidden');
      if(id==='direto') renderLiveTabs();
    }

    // ======= HOME: CADASTRO =======
    document.getElementById('btnCadastrar').addEventListener('click', ()=>{
      const nome = document.getElementById('nome').value.trim();
      const telefone = normTel(document.getElementById('telefone').value);
      const escola = document.getElementById('escola').value.trim();
      const pack = document.getElementById('pack').value;
      if(!nome || !telefone || !escola || !pack){ alert('Preencha todos os campos e escolha um Pack.'); return; }
      if(usuarios.find(u=>normTel(u.telefone)===telefone)){ alert('Este n√∫mero j√° est√° cadastrado!'); return; }
      const user = { nome, telefone, escola, pack, data: new Date().toISOString(), responded:false };
      usuarios.push(user); save(LS.usuarios, usuarios);
      alert('Cadastro realizado com sucesso!');
      document.getElementById('registerForm').reset();
      updatePendingCount();
    });
    function updatePendingCount(){ document.getElementById('pendingCount').innerText = 'Pedidos Pendentes: ' + usuarios.length; }
    updatePendingCount();

    function showPedidos(){
      const senha = prompt('Digite a senha de administrador');
      if(senha !== '111') return alert('Senha incorreta!');
      const div = document.getElementById('pedidos');
      div.innerHTML='';
      usuarios.forEach((u,i)=>{
        const el = document.createElement('div');
        el.className='card';
        el.innerHTML = `
          <strong>${u.nome}</strong> ‚Äî ${u.telefone} ‚Äî ${u.escola} ‚Äî 
          <em>${u.pack}</em> ‚Äî ${new Date(u.data).toLocaleString()}
          <div style="margin-top:8px">
            <button class='btn btn-red' onclick='deleteUser(${i})'>Eliminar</button>
          </div>`;
        div.appendChild(el);
      });
      div.classList.remove('hidden');
    }
    function deleteUser(i){ usuarios.splice(i,1); save(LS.usuarios, usuarios); showPedidos(); updatePendingCount(); }

    // ======= COMPETITORS (DiretoVots) =======
    function renderCompetitors(){
      const tbody = document.querySelector('#competitorsTable tbody');
      tbody.innerHTML='';
      competitors.forEach((c,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML = `
          <td><img class='avatar' src='${c.foto||'https://via.placeholder.com/50'}' alt='foto'></td>
          <td>${c.nome||'-'}</td>
          <td>${c.escola||'-'}</td>
          <td>${c.votos||0}</td>
          <td>
            <span class='circle' onclick='toggleVote(${i},this)'></span>
            <button class='hidden btn' id='voteBtn${i}' onclick='sendVote(${i})'>Enviar voto no CEO</button>
          </td>`;
        tbody.appendChild(tr);
      });
    }
    renderCompetitors();

    function toggleVote(i, el){
      const btn = document.getElementById('voteBtn'+i);
      const isGreen = el.style.backgroundColor==='green';
      el.style.backgroundColor = isGreen?'var(--danger)':'green';
      btn.classList.toggle('hidden', isGreen);
    }

    // Quando votar: abrir WhatsApp e tamb√©m regista um SMS no armazenamento local e aumenta votos localmente (simula√ß√£o)
    function sendVote(i){
      const voterName = prompt('Digite seu nome para votar'); if(!voterName) return;
      const code = Math.random().toString(36).substr(2,5).toUpperCase();
      const msg = `Ol√° Diogo Paix√£o eu sou ${voterName} e pretendo votar no ${competitors[i].nome} [${code}]`;
      const waUrl = `https://wa.me/244941530467?text=${encodeURIComponent(msg)}`;
      window.open(waUrl,'_blank');
      // incrementar votos localmente (simula√ß√£o) - no seu c√≥digo original n√£o incrementava; aqui sim:
      competitors[i].votos = (Number(competitors[i].votos)||0) + 1;
      save(LS.competitors, competitors);
      renderCompetitors(); renderRanking();
      // Marcar algum usu√°rio como "responded" se o telefone for informado (tentativa)
      // Se o votante corresponde a um usu√°rio cadastrado, marque responded=true
      const norm = normTel(voterName); // votante pode ser um nome n√£o telefone => n√£o match - apenas simulamos
      // Guardar SMS localmente (envio local record)
      storeSMS({to:'DiogoPaixao', from:voterName, msg, ts: now()});
      // Also if there's an activeProfile and its name matches, flag responded true
      const found = usuarios.find(u => u.nome.toLowerCase() === voterName.toLowerCase());
      if(found) { found.responded = true; save(LS.usuarios, usuarios); }
      alert('Voto enviado (abrindo WhatsApp). Voto contabilizado localmente.');
    }

    function openCompetitorEditor(){
      const senha = prompt('Senha do editor (777)'); if(senha!=='777'){ alert('Senha incorreta!'); return; }
      const editor = document.getElementById('competitorEditor');
      editor.classList.remove('hidden');
      buildCompetitorEditor();
    }

    function buildCompetitorEditor(){
      const editor = document.getElementById('competitorEditor');
      editor.innerHTML = '<h3>Editor de Concorrentes</h3>';
      competitors.forEach((c,i)=>{
        const row = document.createElement('div'); row.className='editor-row card';
        row.style.alignItems='center';
        row.innerHTML = `
          <img class='avatar' id='prev${i}' src='${c.foto||'https://via.placeholder.com/50'}'>
          <input type='text' id='n${i}' placeholder='Nome' value='${c.nome||''}'>
          <input type='text' id='e${i}' placeholder='Escola' value='${c.escola||''}'>
          <input type='number' id='v${i}' placeholder='Votos' value='${Number(c.votos||0)}'>
          <div style='display:flex;gap:8px;align-items:center'>
            <input type='file' accept='image/*' onchange='onFotoChange(event, ${i})'>
            <button class='btn-outline' onclick='removeCompetitor(${i})'>Eliminar</button>
          </div>`;
        editor.appendChild(row);
      });
      const actions = document.createElement('div'); actions.className='feed-actions';
      actions.innerHTML = `
        <button class='btn' onclick='addCompetitor()'>Adicionar Concorrente</button>
        <button class='btn' onclick='saveCompetitors()'>Salvar Altera√ß√µes</button>
        <button class='btn-outline' onclick="document.getElementById('competitorEditor').classList.add('hidden')">Fechar</button>`;
      editor.appendChild(actions);
    }

    function onFotoChange(ev,i){ const file=ev.target.files[0]; if(!file) return; const r=new FileReader(); r.onload=()=>{ competitors[i].foto=r.result; document.getElementById('prev'+i).src=r.result; save(LS.competitors, competitors); renderCompetitors(); }; r.readAsDataURL(file); }
    function removeCompetitor(i){ if(!confirm('Eliminar este concorrente?')) return; competitors.splice(i,1); save(LS.competitors, competitors); buildCompetitorEditor(); renderCompetitors(); renderRanking(); }
    function addCompetitor(){ competitors.push({nome:'',escola:'',votos:0,foto:''}); buildCompetitorEditor(); }
    function saveCompetitors(){
      competitors = competitors.map((c,i)=>({
        foto:c.foto||'',
        nome: document.getElementById('n'+i)?.value.trim()||'',
        escola: document.getElementById('e'+i)?.value.trim()||'',
        votos: Number(document.getElementById('v'+i)?.value||0)
      }));
      save(LS.competitors, competitors); renderCompetitors(); renderRanking(); alert('Concorrentes salvos.');
    }

    // ======= RANKING =======
    function renderRanking(){
      const bySchool = {};
      competitors.forEach(c=>{
        const key = c.escola||'‚Äî';
        if(!bySchool[key]) bySchool[key]={total:0, qtd:0, top:null};
        bySchool[key].total += Number(c.votos||0);
        bySchool[key].qtd += 1;
        if(!bySchool[key].top || Number(c.votos||0) > Number(bySchool[key].top.votos||0)) bySchool[key].top = c;
      });
      const resumo = document.getElementById('rankingResumo'); resumo.innerHTML='';
      const table = document.createElement('table');
      table.innerHTML = `<thead><tr><th>Escola</th><th>Total de Votos</th><th>Concorrentes</th><th>Top Concorrente</th></tr></thead>`;
      const tb = document.createElement('tbody');
      Object.entries(bySchool).sort((a,b)=>b[1].total-a[1].total).forEach(([esc,info])=>{
        const tr=document.createElement('tr');
        tr.innerHTML = `<td>${esc}</td><td>${info.total}</td><td>${info.qtd}</td><td>${info.top?.nome||'-'} (${info.top?.votos||0})</td>`;
        tb.appendChild(tr);
      });
      table.appendChild(tb); resumo.appendChild(table);

      const det = document.getElementById('rankingDetalhes'); det.innerHTML='';
      Object.entries(bySchool).forEach(([esc,info])=>{
        const block = document.createElement('div'); block.className='card';
        block.innerHTML = `<h3>${esc}</h3>`;
        const t = document.createElement('table');
        const tb2 = document.createElement('tbody');
        t.innerHTML = `<thead><tr><th>Foto</th><th>Nome</th><th>Votos</th></tr></thead>`;
        competitors.filter(c=> (c.escola||'‚Äî')===esc).sort((a,b)=>b.votos-a.votos).forEach(c=>{
          const tr=document.createElement('tr');
          tr.innerHTML = `<td><img class='avatar' src='${c.foto||'https://via.placeholder.com/50'}'></td><td>${c.nome}</td><td>${c.votos}</td>`;
          tb2.appendChild(tr);
        });
        t.appendChild(tb2); block.appendChild(t); det.appendChild(block);
      });
    }
    renderRanking();

    // ======= EVENTOS =======
    let eventEditorOpen = false;
    function toggleEventEditor(){
      const pass = prompt('Senha (A4)'); if(pass!=='A4'){ alert('Senha incorreta!'); return; }
      eventEditorOpen = !eventEditorOpen;
      document.getElementById('eventEditor').classList.toggle('hidden', !eventEditorOpen);
    }
    function cancelEventEditor(){ eventEditorOpen=false; document.getElementById('eventEditor').classList.add('hidden'); document.getElementById('evData').value=''; document.getElementById('evConteudo').value=''; document.getElementById('evFoto').value=''; }
    function saveNewEvent(){
      const data = document.getElementById('evData').value.trim();
      const conteudo = document.getElementById('evConteudo').value.trim();
      const fotoFile = document.getElementById('evFoto').files[0];
      const pushEvent = (foto)=>{ eventos.push({data, conteudo, foto: foto||''}); save(LS.eventos, eventos); renderEventos(); cancelEventEditor(); };
      if(!data||!conteudo){ alert('Preencha data e conte√∫do'); return; }
      if(fotoFile){ const r=new FileReader(); r.onload=()=>pushEvent(r.result); r.readAsDataURL(fotoFile); } else { pushEvent(''); }
    }
    function renderEventos(){
      const wrap = document.getElementById('eventList'); wrap.innerHTML='';
      if(!eventos.length){ wrap.innerHTML = '<em>Sem eventos por enquanto.</em>'; return; }
      eventos.forEach((ev,i)=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          ${ev.foto?`<img class='event-img' src='${ev.foto}'>`:''}
          <h3>${ev.data}</h3>
          <p>${ev.conteudo}</p>
          <div class='feed-actions'>
            <button class='btn' onclick='editEvent(${i})'>Editar</button>
            <button class='btn-outline' onclick='deleteEvent(${i})'>Excluir</button>
          </div>`;
        wrap.appendChild(card);
      });
    }
    renderEventos();
    function editEvent(i){
      const ev = eventos[i];
      const pass = prompt('Senha (A4)'); if(pass!=='A4'){ alert('Senha incorreta!'); return; }
      document.getElementById('evData').value = ev.data;
      document.getElementById('evConteudo').value = ev.conteudo;
      document.getElementById('eventEditor').classList.remove('hidden');
      eventEditorOpen = true;
      // Save as replace on saveNewEvent: simplify by removing and re-adding
      eventos.splice(i,1);
    }
    function deleteEvent(i){ if(!confirm('Excluir evento?')) return; eventos.splice(i,1); save(LS.eventos,eventos); renderEventos(); }

    // ======= FEED POSTS =======
    function openFeedAuto(){ document.getElementById('feedAuto').classList.remove('hidden'); }
    function closeFeedAuto(){ document.getElementById('feedAuto').classList.add('hidden'); }
    function postToFeed(){ const t = document.getElementById('feedText').value.trim(); if(!t) return; feedPosts.unshift({text:t,ts:now()}); save(LS.feed, feedPosts); document.getElementById('feedText').value=''; renderFeed(); closeFeedAuto(); }
    function renderFeed(){ const wrap = document.getElementById('feedList'); wrap.innerHTML=''; if(!feedPosts.length){ wrap.innerHTML='<em>Sem posts.</em>'; return; } feedPosts.forEach(p=>{ const d=document.createElement('div'); d.className='card'; d.innerHTML=`<div>${new Date(p.ts).toLocaleString()}</div><p>${p.text}</p>`; wrap.appendChild(d); }); }
    renderFeed();

    // ======= PROFILE (Sess√£o Perfil) =======
    function renderProfileArea(){
      const wrap = document.getElementById('profileArea'); wrap.innerHTML='';
      if(!activeProfile){
        // show login/register prompt
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <h3>Entrar / Cadastrar</h3>
          <p>Fa√ßa login com seu telefone ou crie um novo perfil.</p>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <input id="p_name" placeholder="Nome" />
            <input id="p_phone" placeholder="Telefone (ex:+2449...)" />
            <input id="p_estado" placeholder="Estado Civil (opcional)" />
            <input id="p_photo" type="file" accept="image/*" />
            <div style="display:flex;gap:8px">
              <button class="btn" onclick="createProfile()">Cadastrar / Entrar</button>
            </div>
          </div>
        `;
        wrap.appendChild(card);
      } else {
        const profile = activeProfile;
        const card = document.createElement('div'); card.className='card';
        const posts = (profilePosts[profile.telefone]||[]).slice().sort((a,b)=>b.ts-a.ts);
        card.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="display:flex;gap:12px;align-items:center">
              <img id="pphoto" class="profile-photo" src="${profile.photo||'https://via.placeholder.com/110'}" />
              <div>
                <div style="font-weight:900;font-size:18px">${profile.nome}</div>
                <div style="color:#666">${profile.estadoCivil||'‚Äî'}</div>
                <div style="margin-top:6px">Telefone: ${profile.telefone}</div>
              </div>
            </div>
            <div style="display:flex;gap:8px">
              <button class="btn" onclick="editActiveProfile()">Editar Perfil</button>
              <button class="btn-outline" onclick="logoutProfile()">Sair</button>
            </div>
          </div>
          <hr style="margin:12px 0" />
          <div>
            <h4>Publica√ß√µes (expiram em 3h)</h4>
            <textarea id="profilePostText" rows="3" style="width:100%" placeholder="Escreva algo no seu perfil..."></textarea>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn" onclick="postOnProfile()">Publicar</button>
            </div>
            <div id="profilePostsList" style="margin-top:10px"></div>
          </div>
        `;
        wrap.appendChild(card);
        // welcome message & show SMS about Diogo Paix√£o
        setTimeout(()=>{
          alert(`Bem-vindo ${profile.nome}!`);
          storeSMS({to:profile.telefone, from:'Sistema', msg:'Mensagem do Criador: Diogo Paix√£o - Obrigado por usar a plataforma!', ts:now()});
        }, 400);
        renderProfilePosts(profile.telefone);
      }
    }
    renderProfileArea();

    function createProfile(){
      const nome = document.getElementById('p_name').value?.trim();
      const telefone = normTel(document.getElementById('p_phone').value || '');
      const estado = document.getElementById('p_estado').value?.trim();
      const photoFile = document.getElementById('p_photo').files?.[0];
      if(!telefone){ alert('Insira o telefone'); return; }
      // if exists, login
      let user = usuarios.find(u=>normTel(u.telefone)===telefone);
      const finish = (photoData)=>{
        if(!user){
          user = { nome: nome || ('User'+(usuarios.length+1)), telefone, escola:'', pack:'', data: new Date().toISOString(), responded:false };
          usuarios.push(user); save(LS.usuarios, usuarios);
        }
        activeProfile = { nome: nome || user.nome, telefone, estadoCivil: estado||'', photo: photoData||user.photo||'' };
        save(LS.activeProfile, activeProfile);
        renderProfileArea();
      };
      if(photoFile){
        const r=new FileReader(); r.onload=()=>finish(r.result); r.readAsDataURL(photoFile);
      } else finish(null);
    }

    function editActiveProfile(){
      if(!activeProfile) return;
      const newName = prompt('Nome:', activeProfile.nome) || activeProfile.nome;
      const newEstado = prompt('Estado civil:', activeProfile.estadoCivil||'') || activeProfile.estadoCivil;
      const changePhoto = confirm('Deseja atualizar a foto agora? (Sim abre o seletor)');
      if(changePhoto){
        // create temporary input
        const inp = document.createElement('input'); inp.type='file'; inp.accept='image/*';
        inp.onchange = (e)=>{
          const f = e.target.files[0]; if(!f) return;
          const r=new FileReader(); r.onload=()=>{
            activeProfile.photo = r.result; activeProfile.nome = newName; activeProfile.estadoCivil = newEstado;
            save(LS.activeProfile, activeProfile);
            renderProfileArea();
          }; r.readAsDataURL(f);
        };
        inp.click();
      } else {
        activeProfile.nome = newName; activeProfile.estadoCivil = newEstado;
        save(LS.activeProfile, activeProfile); renderProfileArea();
      }
    }

    function logoutProfile(){ activeProfile = null; localStorage.removeItem(LS.activeProfile); renderProfileArea(); alert('Desconectado.'); }

    function postOnProfile(){
      if(!activeProfile) return alert('Fa√ßa login antes de publicar.');
      const text = document.getElementById('profilePostText').value.trim(); if(!text) return;
      profilePosts[activeProfile.telefone] = profilePosts[activeProfile.telefone] || [];
      profilePosts[activeProfile.telefone].push({ text, ts: now() });
      save(LS.profilePosts, profilePosts);
      document.getElementById('profilePostText').value='';
      renderProfilePosts(activeProfile.telefone);
    }

    function renderProfilePosts(phone){
      const wrap = document.getElementById('profilePostsList'); wrap.innerHTML='';
      const posts = (profilePosts[phone]||[]).slice().sort((a,b)=>b.ts-a.ts);
      if(!posts.length) { wrap.innerHTML='<em>Sem publica√ß√µes recentes.</em>'; return; }
      posts.forEach(p=>{
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `<div style="font-size:12px;color:#666">${new Date(p.ts).toLocaleString()}</div><p>${p.text}</p>`;
        wrap.appendChild(el);
      });
    }

    // ======= SEARCH (buscar nomes e enviar SMS sem entrar) =======
    function doSearch(){
      const q = (document.getElementById('searchInput').value || '').toLowerCase().trim();
      const results = usuarios.filter(u=> u.nome.toLowerCase().includes(q));
      document.getElementById('searchCount').innerText = results.length ? `${results.length} encontrados` : '';
      // show quick popup listing (small)
      // remove existing overlay list
      let list = document.getElementById('quickSearchList');
      if(!list){
        list = document.createElement('div'); list.id='quickSearchList';
        list.style.position='fixed'; list.style.top='62px'; list.style.right='16px'; list.style.background='#fff'; list.style.border='1px solid #ddd'; list.style.padding='8px'; list.style.zIndex=50; list.style.maxHeight='60vh'; list.style.overflow='auto'; list.style.borderRadius='8px';
        document.body.appendChild(list);
      }
      list.innerHTML = '';
      if(!q) { list.style.display='none'; return; }
      list.style.display='block';
      results.slice(0,40).forEach(u=>{
        const r = document.createElement('div'); r.className='card'; r.style.marginBottom='6px';
        r.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center">
          <div><strong>${u.nome}</strong><br/><small>${u.telefone}</small></div>
          <div style="display:flex;gap:6px">
            <button class="btn" onclick="quickSendSMS('${u.telefone.replace(/'/g,"\\'")}', '${u.nome.replace(/'/g,"\\'")}')">Enviar SMS</button>
          </div>
        </div>`;
        list.appendChild(r);
      });
    }

    function quickSendSMS(toPhone, toName){
      const text = prompt(`Escreva a SMS para ${toName || toPhone}:`);
      if(!text) return;
      // store SMS locally (expires 3h)
      storeSMS({to: toPhone, from: (activeProfile?.nome || 'Anon'), msg: text, ts: now()});
      // Attempt to open sms: link to phone (mobile)
      window.location.href = `sms:+${toPhone}?body=${encodeURIComponent(text)}`;
      alert('SMS guardada localmente (expira em 3h).');
    }

    function storeSMS(obj){
      smsStore = smsStore || [];
      smsStore.push(obj);
      save(LS.smsStore, smsStore);
      cleanupExpired();
    }

    // ======= SMS list viewer (small) =======
    function renderLiveTabs(){
      const wrap = document.getElementById('liveTabs'); wrap.innerHTML='';
      cleanupExpired();
      // For each registered user show small tab with message depending on responded status and countdown running
      const running = countdownSeconds > 0;
      usuarios.forEach(u=>{
        const tab = document.createElement('div'); tab.className='small-tab';
        const msg = (running && !u.responded) ? 'Vote agora, o seu amigo est√° sofrendo' : (running && u.responded ? `Olha üò± o ${u.nome} est√° indo bem` : `Ol√° ${u.nome}`);
        tab.innerHTML = `<div style="font-weight:700">${u.nome}</div><div style="font-size:12px">${msg}</div>`;
        wrap.appendChild(tab);
      });
    }

    // ======= NOTIFICATIONS DURING COUNTDOWN =======
    function requestNotifications(){
      if(!('Notification' in window)){ alert('Seu browser n√£o suporta Notifications API.'); return; }
      if(Notification.permission === 'granted'){ alert('Notifica√ß√µes j√° ativadas.'); return; }
      Notification.requestPermission().then(p=> {
        if(p === 'granted') alert('Notifica√ß√µes ativadas!'); else alert('Permiss√£o de notifica√ß√£o negada.');
      });
    }

    // show in-browser notification helper
    function showNotification(title, body){
      if(Notification.permission === 'granted'){
        try { new Notification(title, { body }); } catch(e){ console.warn('Notification failed', e); }
      } else {
        console.log('Notification blocked:', title, body);
      }
    }

    // Function that runs every second to update countdown display and trigger notifications
    const countdownEl = document.getElementById('countdown');
    function startCountdownTimer(){
      clearInterval(timerInterval);
      timerInterval = setInterval(()=>{
        if(countdownSeconds > 0){
          countdownSeconds--;
          save(LS.countdown, countdownSeconds);
          updateCountdownUI();
          // Every 10 seconds, send notifications to users who haven't responded
          if(countdownSeconds % 10 === 0){
            usuarios.forEach(u=>{
              const messageForUser = (!u.responded) ? `Vote agora: o seu amigo est√° sofrendo!` : `Olha üò± o ${u.nome} est√° indo bem`;
              // local notification
              showNotification('Playmates', `${u.nome}: ${messageForUser}`);
            });
            renderLiveTabs();
          }
        } else {
          // countdown ended
          clearInterval(timerInterval);
          save(LS.countdown, 0);
          updateCountdownUI();
          onCountdownEnd();
        }
      }, 1000);
    }

    function updateCountdownUI(){
      const s = countdownSeconds;
      const h = Math.floor(s/3600); const m = Math.floor((s%3600)/60); const sec = s%60;
      countdownEl.innerText = `${pad(h)}:${pad(m)}:${pad(sec)}`;
      document.getElementById('inCountdownStatus').innerText = s>0 ? `Contagem: ${h}h ${m}m ${sec}s` : '';
      function pad(n){ return String(n).padStart(2,'0'); }
    }
    updateCountdownUI();

    // click countdown to set (admin R2)
    countdownEl.addEventListener('click', ()=>{
      const senha = prompt('Senha para editar contagem (R2)'); if(senha !== 'R2') return;
      const minutos = Number(prompt('Defina dura√ß√£o em minutos (ex: 10)')) || 0;
      countdownSeconds = Math.max(0, Math.floor(minutos*60));
      save(LS.countdown, countdownSeconds);
      if(countdownSeconds>0) startCountdownTimer();
      updateCountdownUI(); renderLiveTabs();
    });

    // If there's preexisting countdown >0 start timer
    if(countdownSeconds > 0) startCountdownTimer();

    // When countdown ends: determine winner, show animation for 30s then return to home automatically
    function onCountdownEnd(){
      // determine competitor with most votos
      if(!competitors.length) return;
      const sorted = competitors.slice().sort((a,b)=>b.votos - a.votos);
      const winner = sorted[0];
      // determine prize based on some heuristic:
      // if algum usu√°rio com same escola or pack? For simplicity: check if any user selected Pack Premium else Mater else Gr√°tis
      const packs = usuarios.map(u=>u.pack).filter(Boolean);
      let prize = 'Pr√™mio: 1000kz';
      if(packs.includes('Pack Premium')) prize = 'Pr√™mio: Pacote Premium';
      else if(packs.includes('Pack Mater')) prize = 'Pr√™mio: 5.000kz';
      else prize = 'Pr√™mio: 1.000kz';
      // show overlay card
      document.getElementById('winnerName').innerText = winner.nome || '‚Äî';
      document.getElementById('winnerInfo').innerText = `Pontua√ß√£o: ${winner.votos || 0} ‚Äî ${prize}`;
      document.getElementById('winnerOverlay').classList.remove('hidden');
      // play a simple animation (30s) then hide and go home
      setTimeout(()=>{
        closeWinner();
      }, 30000); // 30s
    }

    function closeWinner(){
      document.getElementById('winnerOverlay').classList.add('hidden');
      showSection('home');
    }

    // ======= Live tabs render based on countdown and responded flags
    function renderLiveTabs(){
      const wrap = document.getElementById('liveTabs'); wrap.innerHTML='';
      const running = countdownSeconds>0;
      usuarios.forEach(u=>{
        const tab = document.createElement('div'); tab.className='small-tab';
        const msg = (running && !u.responded) ? 'Vote agora, o seu amigo est√° sofrendo' : (running && u.responded ? `Olha üò± o ${u.nome} est√° indo bem` : `Ol√° ${u.nome}`);
        tab.innerHTML = `<div style="font-weight:700">${u.nome}</div><div style="font-size:12px">${msg}</div>`;
        wrap.appendChild(tab);
      });
    }

    // ======= SMS store viewer (for admin) =======
    function viewStoredSMS(){
      const pass = prompt('Senha admin para ver SMS (999)');
      if(pass !== '999') return alert('Senha incorreta');
      cleanupExpired();
      const s = smsStore.slice().sort((a,b)=>b.ts-a.ts);
      let txt = 'SMS armazenadas (√∫ltimas):\n\n';
      s.forEach(m=> txt += `${new Date(m.ts).toLocaleString()} ‚Äî to:${m.to} from:${m.from} ‚Äî ${m.msg}\n`);
      alert(txt || 'Sem SMS guardadas.');
    }

    // Button to view stored sms (debug) - add to feed-actions maybe
    // ======= Initialize small UI bits and cleanup intervals =======
    // Auto-clean expired every 5 minutes
    setInterval(()=>{ cleanupExpired(); renderLiveTabs(); }, 5*60*1000);

    // initial render
    renderCompetitors();
    renderRanking();
    renderFeed();
    renderLiveTabs();
    renderProfileArea();

    // Expose some functions globally used by inline onclicks
    window.toggleVote = toggleVote;
    window.sendVote = sendVote;
    window.openCompetitorEditor = openCompetitorEditor;
    window.onFotoChange = onFotoChange;
    window.removeCompetitor = removeCompetitor;
    window.addCompetitor = addCompetitor;
    window.saveCompetitors = saveCompetitors;
    window.showPedidos = showPedidos;
    window.deleteUser = deleteUser;
    window.editEvent = editEvent;
    window.deleteEvent = deleteEvent;
    window.viewStoredSMS = viewStoredSMS;
    window.requestNotifications = requestNotifications;
    
  // ---------- PUZZLE GAME (PLAYHOU) ----------
  const PUZZLE = {size:3, timeLimit:120, board:[], timer:null, running:false, startTs:0};
  function genBoard(){ const arr = [...Array(PUZZLE.size*PUZZLE.size).keys()].slice(1); arr.push(''); return arr; }
  function shuffleBoard(){ const arr = genBoard(); for(let i=arr.length-1;i>0;i--){ const j = Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } PUZZLE.board = arr; }
  function renderPuzzleUI(){ const boardEl = document.getElementById('puzzleBoard'); if(!boardEl) return; boardEl.innerHTML=''; PUZZLE.board.forEach((v,idx)=>{ const cell = document.createElement('div'); cell.className = 'puzzle-cell' + (v === '' ? ' empty':''); cell.textContent = v; if(v !== '') cell.addEventListener('click', ()=> tryMove(idx)); boardEl.appendChild(cell); }); updatePuzzleTimerDisplay(); renderPuzzleRank(); }
  function tryMove(idx){ if(!PUZZLE.running) return; const emptyIdx = PUZZLE.board.indexOf(''); const sx = Math.floor(emptyIdx / PUZZLE.size), sy = emptyIdx % PUZZLE.size; const tx = Math.floor(idx/PUZZLE.size), ty = idx%PUZZLE.size; const dist = Math.abs(sx-tx)+Math.abs(sy-ty); if(dist === 1){ [PUZZLE.board[emptyIdx], PUZZLE.board[idx]] = [PUZZLE.board[idx], PUZZLE.board[emptyIdx]]; renderPuzzleUI(); checkPuzzleWin(); } }
  function checkPuzzleWin(){ const arr = PUZZLE.board.slice(0,-1).map(String); const goal = [...Array(PUZZLE.size*PUZZLE.size-1)].map((_,i)=>(i+1).toString()); const ok = arr.join() === goal.join(); if(ok){ finishPuzzle(true); } }
  function startPuzzle(){ if(PUZZLE.running) return; shuffleBoard(); PUZZLE.running=true; PUZZLE.startTs = Date.now(); PUZZLE.timeLeft = PUZZLE.timeLimit; PUZZLE.timer = setInterval(()=>{ PUZZLE.timeLeft--; updatePuzzleTimerDisplay(); if(PUZZLE.timeLeft<=0){ finishPuzzle(false); } },1000); renderPuzzleUI(); }
  function finishPuzzle(won){ PUZZLE.running=false; clearInterval(PUZZLE.timer); if(won){ const elapsed = Math.max(1, Math.round((Date.now()-PUZZLE.startTs)/1000)); savePuzzleRank(elapsed); document.getElementById('puzzleStatus').innerText = `Parab√©ns! Ganhou em ${elapsed}s`; } else { document.getElementById('puzzleStatus').innerText = 'Tempo esgotado!'; } renderPuzzleUI(); }
  function updatePuzzleTimerDisplay(){ const el = document.getElementById('puzzleTimer'); if(!el) return; const s = PUZZLE.timeLeft || PUZZLE.timeLimit; const mm = String(Math.floor(s/60)).padStart(2,'0'); const ss = String(s%60).padStart(2,'0'); el.innerText = `${mm}:${ss}`; }
  function savePuzzleRank(sec){ const ranks = load(LS.puzzleRank) || []; ranks.push({sec,ts:Date.now()}); ranks.sort((a,b)=>a.sec-b.sec); save(LS.puzzleRank, ranks.slice(0,10)); renderPuzzleRank(); }
  function renderPuzzleRank(){ const ul = document.getElementById('puzzleRank'); if(!ul) return; const ranks = load(LS.puzzleRank) || []; ul.innerHTML = ranks.length ? ranks.map(r=>`<li class='card'>${r.sec}s - ${new Date(r.ts).toLocaleString()}</li>`).join('') : '<li class="small">Sem resultados</li>'; }
  document.addEventListener('DOMContentLoaded', ()=>{
    const startBtn = document.getElementById('startPuzzleBtn'); if(startBtn) startBtn.addEventListener('click', ()=>{ startPuzzle(); document.getElementById('puzzleStatus').innerText=''; });
    const shuffleBtn = document.getElementById('shuffleBtn'); if(shuffleBtn) shuffleBtn.addEventListener('click', ()=>{ shuffleBoard(); renderPuzzleUI(); });
  });
  // make initial board
  shuffleBoard(); PUZZLE.timeLeft = PUZZLE.timeLimit;

  // ---------- Init: render everything once so every section has content ready ----------
  function initAll(){ renderCompetitors(); renderFeed(); renderEvents(); renderFriends(); renderMsgs(); renderRanking(); renderProfile(); renderPuzzleUI(); updatePendingCount(); }
  window.addEventListener('load', ()=>{ initAll(); showSection('home'); });

  </script>

</body>
</html>
